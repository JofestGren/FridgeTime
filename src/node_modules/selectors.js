import * as R from 'ramda'

export const getCategories = state => R.values(state.categories)

export const getRecipeById = (state, id) => R.prop(id, state.recipes)

export const getRecipe = (state, id) => R.prop(id, state.recipe)

export const getRecipes = state => {
  const recipes = R.compose(
    R.map(id => getRecipeById(state, id)) 
  )(state.recipesPage.ids)
  return recipes
}

export const getRenderRecipesLength = state => R.length(state.recipesPage.ids)

export const getTotalBasketCount = state => R.length(state.basketPage)

export const getTotalBasketTime = state => {
  const totalTime = R.compose(
    R.sum,
    R.pluck('totalTimeInSeconds'),
    R.map(id => getRecipeById(state, id))
  )(state.basketPage)

  return totalTime/60
}

export const getBasketRecipes = state => {
  const getBasketRecipeById = (state, id) => R.prop(id, state.basket)

  const recipes = R.compose(
    R.map(id => getBasketRecipeById(state, id)) 
  )(state.basketPage)
  return recipes
}